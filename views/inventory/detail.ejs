const inventoryModel = require('../models/inventory-model');

// Display single vehicle detail
async function vehicleDetail(req, res, next) {
try {
const inv_id = req.params.inv_id;
const vehicle = await inventoryModel.getVehicleById(inv_id);

if (!vehicle) {
return res.status(404).render('errors/404', {
title: 'Vehicle Not Found',
message: 'No vehicle found with this ID.'
});
}

// Pass the vehicle object directly to EJS
res.render('inventory/detail', {
title: `${vehicle.inv_make} ${vehicle.inv_model}`,
vehicle
});

} catch (err) {
console.error(err); // Log for debugging on Render
next(err);
}
}

module.exports = { vehicleDetail };